<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hindi Typing With Matras</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        h2 {
            color: #333;
        }
        .control-group {
            margin: 20px 0;
        }
        select {
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid #4285f4;
            border-radius: 4px;
            cursor: pointer;
            background: white;
        }
        input {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            font-size: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            margin-top: 10px;
        }
        input:focus {
            outline: none;
            border-color: #4285f4;
        }
        .status {
            display: inline-block;
            margin-left: 15px;
            padding: 8px 15px;
            background: #e8f0fe;
            color: #1967d2;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .instructions {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-left: 4px solid #4285f4;
            border-radius: 4px;
        }
        .instructions h3 {
            margin-top: 0;
            color: #1967d2;
        }
        .instructions ul {
            line-height: 1.8;
        }
        .instructions code {
            background: #e8f0fe;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            color: #d93025;
        }
        .examples {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 4px;
        }
        .examples h4 {
            margin-top: 0;
            color: #0f9d58;
        }
        .example-item {
            margin: 8px 0;
            font-size: 16px;
        }
    </style>
</head>
<body>

<h2>‚úçÔ∏è Hindi Typing with Matras</h2>

<div class="instructions">
    <h3>üìù How to use:</h3>
    <ul>
        <li>Select <strong>Hindi</strong> from dropdown to enable transliteration</li>
        <li>Type in English and press <strong>Space</strong> to convert to Hindi</li>
        <li>Each word converts when you press space</li>
    </ul>
</div>

<div class="control-group">
    <select id="languageSelect">
        <option value="en">English</option>
        <option value="hi">Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</option>
    </select>
    <span class="status" id="status">Mode: English</span>
</div>

<input type="text" id="searchBox" placeholder="Select Hindi mode and type here...">

<div class="examples">
    <h4>üí° Try these examples:</h4>
    <div class="example-item"><code>namaste</code> ‚Üí ‡§®‡§Æ‡§∏‡•ç‡§§‡•á</div>
    <div class="example-item"><code>bharat</code> ‚Üí ‡§≠‡§æ‡§∞‡§§</div>
    <div class="example-item"><code>hindi</code> ‚Üí ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
    <div class="example-item"><code>dhanyavaad</code> ‚Üí ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶</div>
    <div class="example-item"><code>desh</code> ‚Üí ‡§¶‡•á‡§∂</div>
    <div class="example-item"><code>kitaab</code> ‚Üí ‡§ï‡§ø‡§§‡§æ‡§¨</div>
    <div class="example-item"><code>paani</code> ‚Üí ‡§™‡§æ‡§®‡•Ä</div>
</div>

<script>

// Consonants mapping
const consonants = {
    "kh": "‡§ñ", "k": "‡§ï",
    "gh": "‡§ò", "g": "‡§ó",
    "ch": "‡§õ", "c": "‡§ö",
    "jh": "‡§ù", "j": "‡§ú",
    "th": "‡§•", "t": "‡§§",
    "dh": "‡§ß", "d": "‡§¶",
    "ph": "‡§´", "p": "‡§™",
    "bh": "‡§≠", "b": "‡§¨",
    "m": "‡§Æ", "n": "‡§®",
    "y": "‡§Ø", "r": "‡§∞",
    "l": "‡§≤", "v": "‡§µ", "w": "‡§µ",
    "sh": "‡§∂", "s": "‡§∏", "h": "‡§π",
    "ng": "‡§ô", "ny": "‡§û",
    "nh": "‡§£", "N": "‡§£"
};

// Vowel matras (used after consonants)
const matras = {
    "aa": "‡§æ", "a": "‡§æ",
    "i": "‡§ø",
    "ee": "‡•Ä", "I": "‡•Ä",
    "u": "‡•Å",
    "oo": "‡•Ç", "U": "‡•Ç",
    "e": "‡•á",
    "ai": "‡•à",
    "o": "‡•ã",
    "au": "‡•å",
    "R": "‡•É"
};

// Independent vowels (word start)
const vowels = {
    "a": "‡§Ö", "aa": "‡§Ü", "A": "‡§Ü",
    "i": "‡§á", "ee": "‡§à", "I": "‡§à",
    "u": "‡§â", "oo": "‡§ä", "U": "‡§ä",
    "e": "‡§è", "ai": "‡§ê",
    "o": "‡§ì", "au": "‡§î"
};

// Special characters
const special = {
    "0": "‡•¶", "1": "‡•ß", "2": "‡•®", "3": "‡•©", "4": "‡•™",
    "5": "‡•´", "6": "‡•¨", "7": "‡•≠", "8": "‡•Æ", "9": "‡•Ø"
};

function transliterate(text) {
    if (!text || text.trim() === '') return text;

    let result = '';
    let i = 0;

    while (i < text.length) {
        let matched = false;

        // Try 2-char consonants first (kh, gh, etc)
        if (i < text.length - 1) {
            let twoChar = text.substr(i, 2).toLowerCase();
            if (consonants[twoChar]) {
                result += consonants[twoChar];
                i += 2;

                // Check for matra after consonant
                let remainingText = text.substr(i).toLowerCase();
                for (let [key, value] of Object.entries(matras).sort((a, b) => b[0].length - a[0].length)) {
                    if (remainingText.startsWith(key)) {
                        result += value;
                        i += key.length;
                        break;
                    }
                }
                matched = true;
                continue;
            }
        }

        // Try 2-char vowels at word start
        if (i === 0 || result.endsWith(' ')) {
            if (i < text.length - 1) {
                let twoChar = text.substr(i, 2).toLowerCase();
                if (vowels[twoChar]) {
                    result += vowels[twoChar];
                    i += 2;
                    matched = true;
                    continue;
                }
            }
        }

        // Try single consonant
        let oneChar = text[i].toLowerCase();
        if (consonants[oneChar]) {
            result += consonants[oneChar];
            i++;

            // Check for matra
            let remainingText = text.substr(i).toLowerCase();
            for (let [key, value] of Object.entries(matras).sort((a, b) => b[0].length - a[0].length)) {
                if (remainingText.startsWith(key)) {
                    result += value;
                    i += key.length;
                    break;
                }
            }
            matched = true;
            continue;
        }

        // Try single vowel at word start
        if (i === 0 || result.endsWith(' ')) {
            if (vowels[oneChar]) {
                result += vowels[oneChar];
                i++;
                matched = true;
                continue;
            }
        }

        // Numbers
        if (special[text[i]]) {
            result += special[text[i]];
            i++;
            matched = true;
            continue;
        }

        // Space or punctuation - keep as is
        if (!matched) {
            result += text[i];
            i++;
        }
    }

    return result;
}

// Input handling
let hindiEnabled = false;
let currentInput = '';

const searchBox = document.getElementById("searchBox");
const languageSelect = document.getElementById("languageSelect");
const statusSpan = document.getElementById("status");

searchBox.addEventListener('input', function(e) {
    if (!hindiEnabled) return;

    const value = e.target.value;
    const lastChar = value[value.length - 1];

    // Store the input for processing
    currentInput = value;
});

searchBox.addEventListener('keydown', function(e) {
    if (!hindiEnabled) return;

    // Convert on space
    if (e.key === ' ') {
        e.preventDefault();

        const value = searchBox.value;
        const words = value.split(' ');
        const lastWord = words[words.length - 1];

        if (lastWord) {
            const converted = transliterate(lastWord);
            words[words.length - 1] = converted;
            searchBox.value = words.join(' ') + ' ';
        } else {
            searchBox.value = value + ' ';
        }
    }
});

languageSelect.addEventListener("change", () => {
    if (languageSelect.value === "hi") {
        hindiEnabled = true;
        statusSpan.textContent = "Mode: Hindi ‚úì";
        statusSpan.style.background = "#e8f5e9";
        statusSpan.style.color = "#0f9d58";
        searchBox.placeholder = "Type in English, press Space to convert...";
    } else {
        hindiEnabled = false;
        statusSpan.textContent = "Mode: English";
        statusSpan.style.background = "#e8f0fe";
        statusSpan.style.color = "#1967d2";
        searchBox.placeholder = "Select Hindi mode and type here...";
    }
});

</script>

</body>
</html>
